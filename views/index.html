<!DOCTYPE html><html><head ng-controller="HeadController"><script type="application/javascript"></script><script type="application/javascript"></script><script type="application/javascript"></script><link rel="stylesheet"><link rel="stylesheet"><title>{{ pageTitle }}</title><link rel="icon" href="/favicon.ico"></head><body><div id="top-bar" ng-controller="TopBarController"><div id="user-info-panel"><div ng-if="user.permission == 'guest'"><p><span ng-click="metaData.panelState = metaData.panelState == 'register' ? 'none' : 'register'">Register</span><span ng-click="metaData.panelState = metaData.panelState == 'login' ? 'none' : 'login'">Login</span></p></div><div ng-if="user.permission != 'guest'"><p><span>{{ user.nickname }}({{ user.username }})</span><span ng-click="logout()">Logout</span></p></div></div><div id="register-login-panel" ng-if="user.permission == 'guest'"><div id="register-panel" ng-if="metaData.panelState == 'register'"><span>Username</span><input ng-model="r_username"><span>Password</span><input ng-model="r_password"><span>Confirm</span><input ng-model="r_confirm"><span>Nickname</span><input ng-model="r_nickname"><button ng-click="register(r_username, r_password, r_nickname);metaData.panelState = 'none'">Register</button></div><div id="login-panel" ng-if="metaData.panelState == 'login'"><span>Username</span><input ng-model="l_username"><span>Password</span><input ng-model="l_password"><button ng-click="login(l_username, l_password);metaData.panelState = 'none'">Login</button></div></div></div><div id="header-bar"><h1></h1></div><div id="content" ng-controller="PostListController"><button ng-if="!metaData.addingNewPost" ng-click="toAddNewPost()">Add new post</button><div ng-if="metaData.addingNewPost"><div><input ng-model="metaData.newPostTitle" placeholder="Post title"></div><div><input ng-model="metaData.newPostBody" placeholder="Post body"></div><div><button ng-click="addNewPost()">Post</button><button ng-click="metaData.addingNewPost = false">Cancel</button></div></div><h2>There {{ posts.length > 1 ? "are" : "is" }} {{ posts.length > 0 ? posts.length : "no" }} post{{ posts.length > 1 ? "s" : "" }}.</h2><div ng-repeat="post in posts"><h3>{{ post.title }}</h3><h5>{{ post.author_id }}</h5><p>Summary</p><div id="post-content-panel" ng-if="post.expanded"><p>{{ post.content }}</p></div><div id="post-edit-panel" ng-if="$parent.metaData.editingIndex == $index"><div><input ng-model="post.content"></div><div><button>Update</button><button ng-click="$parent.metaData.editingIndex = -1">Cancel</button></div></div><div id="post-action-panel"><button ng-click="post.expanded = !post.expanded">{{ post.expanded ? "Collapse" : "Read more" }}</button><button ng-if="$parent.metaData.editingIndex == -1" ng-click="$parent.metaData.editingIndex = $index">Edit post</button><button ng-if="$parent.metaData.editingIndex == -1">Delete post</button></div></div></div></body></html>