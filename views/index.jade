doctype html
html(ng-app=appName)
    head(ng-controller="HeadController")
        script(type="application/javascript",src=angularJsSrc)
        script(type="application/javascript",src=angularRouteSrc)
        script(type="application/javascript",src=angularAppSrc)
        link(rel="stylesheet",href=baseCssSrc)
        link(rel="stylesheet",href=themeCssSrc)
        title {{ pageTitle }}
        link(rel="icon",href="/favicon.ico")
    body
        div#top-bar
            div#user-info-panel
                div
                    p
                        span Register
                        span Login
                div
                    p
                        span Nickname(username)
                        span Logout
            div#register-login-panel
                div#register-panel
                    span Username
                    input
                    span Password
                    input
                    span Confirm
                    input
                    span Nickname
                    input
                    button Register
                div#login-panel
                    span Username
                    input
                    span Password
                    input
                    button Login
        div#header-bar
            h1= appName
        div#content(ng-controller="PostListController")
            button(ng-if="!metaData.addingNewPost",ng-click="toAddNewPost()") Add new post
            div(ng-if="metaData.addingNewPost")
                div
                    input(ng-model="newPostTitle",placeholder="Post title")
                div
                    input(ng-model="newPostBody",placeholder="Post body")
                div
                    button Post
                    button(ng-click="metaData.addingNewPost = false") Cancel
            h2 There {{ posts.length > 1 ? "are" : "is" }} {{ posts.length > 0 ? posts.length : "no" }} post{{ posts.length > 1 ? "s" : "" }}.
            div(ng-repeat="post in posts")
                h3 Post Title
                h5 Author
                p Summary
                div#post-content-panel(ng-if="post.expanded")
                    p Content
                div#post-edit-panel(ng-if="$parent.metaData.editingIndex == $index")
                    div
                        input
                    div
                        button Update
                        button(ng-click="$parent.metaData.editingIndex = -1") Cancel
                div#post-action-panel
                    button(ng-click="post.expanded = !post.expanded") {{ post.expanded ? "Collapse" : "Read more" }}
                    button(ng-if="$parent.metaData.editingIndex == -1",ng-click="$parent.metaData.editingIndex = $index") Edit post
                    button(ng-if="$parent.metaData.editingIndex == -1") Delete post
